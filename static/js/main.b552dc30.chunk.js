(this["webpackJsonptime-tracker"]=this["webpackJsonptime-tracker"]||[]).push([[0],{254:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a.n(n),c=a(64),i=a.n(c),r=(a(147),a(20)),l=a(257),j=a(262),o=a(264),d=a(256),h=a(26),u=a(27),b=a(49),O=a(9),x=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(u.e)();return Object(n.useEffect)((function(){h.a.app().auth().onAuthStateChanged(s)}),[]),Object(O.jsxs)(j.a,{expand:"lg",children:[Object(O.jsx)(j.a.Brand,{children:"Time Tracker"}),Object(O.jsx)(j.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsxs)(j.a.Collapse,{children:[Object(O.jsx)(o.a,{className:"me-auto",children:a?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.a.Link,{children:Object(O.jsx)(b.b,{to:"/",style:{textDecoration:"none"},className:"nav-link",children:"Zeit tracken"})}),Object(O.jsx)(o.a.Link,{children:Object(O.jsx)(b.b,{to:"/tasks",className:"nav-link",children:"Aktivit\xe4ten bearbeiten"})}),Object(O.jsx)(o.a.Link,{children:"Statistiken"}),Object(O.jsx)(o.a.Link,{children:"Account"})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(o.a.Link,{children:"Login"})})}),Object(O.jsx)(o.a,{children:a&&Object(O.jsx)(o.a.Link,{children:Object(O.jsx)(d.a,{variant:"outline-primary",onClick:function(){return h.a.app().auth().signOut().then((function(){return c&&c.push("/")}))},children:"Ausloggen"})})})]})]})},p=a(72),m=a(56),v=a(258),f=a(263),g=a(259),k=a(139),w=a(141),S=a(140),C=a(265),A=a(260),P=a(62),D=a(38),y=D.a().shape({email:D.c().email("Die E-Mail muss g\xfcltig sein").required("Das E-Mail Feld darf nicht leer sein"),password:D.c()}),E=function(){var e=Object(u.e)(),t=Object(n.useState)({email:"",password:""}),a=Object(r.a)(t,2),s=a[0],c=a[1],i=Object(P.a)({validateOnChange:!1,validateOnBlur:!0,validationSchema:y,initialValues:{email:"",password:""},onSubmit:function(t){var a=t.email,n=t.password;h.a.app().auth().signInWithEmailAndPassword(a,n).then((function(){return e.push("/")})).catch(j)}}),j=function(e){switch(console.log(e.code),e.code){case"auth/invalid-email":c(Object(m.a)(Object(m.a)({},s),{},{email:"Die eingegebene Email ist nicht valid"}));break;case"auth/user-not-found":c(Object(m.a)(Object(m.a)({},s),{},{email:"Dieses Konto existiert nicht"}));break;case"auth/wrong-password":c(Object(m.a)(Object(m.a)({},s),{},{password:"Das eingegebene Passwort ist nicht korrekt"}))}};return Object(O.jsxs)(l.a,{children:[Object(O.jsx)(v.a,{children:"Login"}),Object(O.jsx)("br",{}),Object(O.jsxs)(f.a,{onSubmit:function(e){e.preventDefault(),i.handleSubmit()},children:[Object(O.jsx)(g.a,{children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(w.a,{children:"E-Mail Adresse"}),Object(O.jsx)(S.a,{type:"email",name:"email",isInvalid:!!i.errors.email||!!s.email,placeholder:"Email Adresse",onChange:i.handleChange}),Object(O.jsx)(C.a,{variant:"danger",show:!!i.errors.email||!!s.email,children:i.errors.email||s.email})]})}),Object(O.jsx)(g.a,{children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(w.a,{children:"Passwort"}),Object(O.jsx)(S.a,{type:"password",name:"password",isInvalid:!!i.errors.password||!!s.password,placeholder:"Passwort",onChange:i.handleChange}),Object(O.jsx)(C.a,{variant:"danger",show:!!i.errors.password||!!s.password,children:i.errors.password||s.password})]})}),Object(O.jsx)("br",{}),Object(O.jsx)(d.a,{type:"submit",children:"Einloggen"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)(A.a,{children:["Noch kein Account? ",Object(O.jsx)(b.b,{to:"/signup",children:"Hier registrieren"})]})]})]})},I=a(0),T=a.n(I),N=a(3),F=a(142),L=D.a().shape({email:D.c().required("Das Email Feld darf nicht leer sein").email(),password:D.c().required("Das Passwort Feld darf nicht leer sein").min(6,"Das Passwort muss mindestens 6 Zeichen enthalten"),confirmPassword:D.c().oneOf([D.b("password")],"Die Passw\xf6rter stimmen nicht \xfcberein")}),M=function(){var e=Object(u.e)(),t=function(){var t=Object(N.a)(T.a.mark((function t(a){var n,s,c,i;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.email,s=a.password,t.next=3,h.a.app().auth().createUserWithEmailAndPassword(n,s);case 3:if(c=t.sent,!(i=c.user)){t.next=9;break}return t.next=8,h.a.firestore().collection("users").doc(i.uid).set({activities:[],tasks:[],fastTasks:[]});case 8:h.a.app().auth().signInWithEmailAndPassword(n,s).then((function(){return e.push("")}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=Object(P.a)({initialValues:{password:"",confirmPassword:"",email:""},validateOnBlur:!1,validateOnChange:!0,validationSchema:L,onSubmit:t});return Object(O.jsxs)(l.a,{children:[Object(O.jsx)(v.a,{children:"Konto erstellen"}),Object(O.jsxs)(f.a,{onSubmit:function(e){e.preventDefault(),a.handleSubmit(e)},children:[Object(O.jsx)(g.a,{children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(w.a,{children:"Email Adresse"}),Object(O.jsx)(S.a,{type:"email",name:"email",placeholder:"Email Adresse",onChange:a.handleChange})]})}),Object(O.jsxs)(g.a,{children:[Object(O.jsx)(F.a,{children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(w.a,{children:"Passwort"}),Object(O.jsx)(S.a,{type:"password",name:"password",placeholder:"Passwort",onChange:a.handleChange})]})}),Object(O.jsx)(F.a,{children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(w.a,{children:"Passwort best\xe4tigen"}),Object(O.jsx)(S.a,{type:"password",name:"confirmPassword",placeholder:"Passwort best\xe4tigen",onChange:a.handleChange})]})})]}),Object(O.jsx)("br",{}),Object(O.jsx)(d.a,{type:"submit",children:"Konto erstellen"})]})]})},B=a(266),K=function(e){return"".concat(U(Math.floor(e/36e5)),":").concat(U(Math.floor(e/6e4)),":").concat(U(Math.floor(e/1e3)))},U=function(e){return"0".concat(e).slice(-2)},q=function(){var e=Object(n.useState)("00:00:00"),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(),i=Object(r.a)(c,2),j=i[0],o=i[1],u=Object(n.useState)(),b=Object(r.a)(u,2),x=b[0],p=b[1],m=Object(n.useState)(),f=Object(r.a)(m,2),k=f[0],w=f[1];return Object(n.useEffect)((function(){h.a.app().firestore().collection("users").doc(h.a.app().auth().currentUser.uid).onSnapshot((function(e){return o(e.data())}))}),[]),Object(n.useEffect)((function(){var e=null===j||void 0===j?void 0:j.activities[(null===j||void 0===j?void 0:j.activities.length)-1];if(e){var t=e.pauses[(null===e||void 0===e?void 0:e.pauses.length)-1];e.finished?(p(void 0),clearInterval(k),w(void 0),s("00:00:00")):(null===t||void 0===t?void 0:t.finished)?(clearInterval(k),p({isPause:!1,name:t.task}),w(setInterval((function(){return s(K((new Date).getTime()-new Date(t.start).getTime()))}),1e3))):!(null===t||void 0===t?void 0:t.finished)&&(null===t||void 0===t?void 0:t.start)?(clearInterval(k),p({isPause:!0,name:null===t||void 0===t?void 0:t.task}),w(setInterval((function(){}),1e3))):!(null===e||void 0===e?void 0:e.finished)&&(null===e||void 0===e?void 0:e.start)&&w(setInterval((function(){return s(K((new Date).getTime()-new Date(e.start).getTime()))}),1e3))}}),[null===j||void 0===j?void 0:j.activities[(null===j||void 0===j?void 0:j.activities.length)-1]]),Object(O.jsxs)(l.a,{children:[Object(O.jsx)(v.a,{children:"Zeit tracken"}),Object(O.jsx)(g.a,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(g.a,{children:Object(O.jsx)("h1",{children:a})}),x&&Object(O.jsx)(g.a,{children:Object(O.jsxs)("p",{children:["Aktueller Task: ",x.name||"Pause"]})})]})}),Object(O.jsxs)(g.a,{children:[Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{variant:"success",children:"Starten"})}),Object(O.jsx)(F.a,{children:(null===x||void 0===x?void 0:x.isPause)?Object(O.jsx)(d.a,{variant:"secondary",children:"Pause beenden"}):Object(O.jsx)(d.a,{variant:"secondary",children:"Pause"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{variant:"danger",children:"Stopp"})})]}),Object(O.jsx)("br",{}),Object(O.jsx)("h1",{children:"Schnell-Start"}),Object(O.jsx)(g.a,{children:Object(O.jsx)(B.a,{children:null===j||void 0===j?void 0:j.fastTasks.map((function(e){return Object(O.jsx)(B.a.Item,{children:e})}))})})]})},z=a(21),W=a(261),H=D.a().shape({task:D.c().required("Das Feld ist erforderlich")}),V=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)([]),i=Object(r.a)(c,2),j=i[0],o=i[1],u=Object(P.a)({initialValues:{task:""},onSubmit:function(e){var t=e.task,n=[].concat(Object(z.a)(a),[t]);h.a.app().firestore().collection("users").doc(h.a.auth().currentUser.uid).update({tasks:n}).then((function(){return s(n)}))},validateOnChange:!1,validateOnBlur:!0,validationSchema:H});return Object(n.useEffect)((function(){h.a.app().firestore().collection("users").doc(h.a.auth().currentUser.uid).onSnapshot((function(e){s(e.get("tasks")||[]),o(e.get("fastTasks")||[])}))}),[]),Object(O.jsxs)(l.a,{children:[Object(O.jsx)(v.a,{children:"Deine Aktivit\xe4ten"}),Object(O.jsxs)(W.a,{bordered:!0,children:[Object(O.jsxs)("thead",{children:[Object(O.jsx)("th",{children:"Name der Aktivit\xe4t"}),Object(O.jsx)("th",{children:"Als Schnell-Task benutzen"})]}),a.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e}),Object(O.jsx)("td",{className:"d-flex text-align-center align-items-center",children:Object(O.jsx)(f.a.Check,{type:"checkbox",defaultChecked:-1!==j.indexOf(e),onChange:function(t){return function(e,t){var a=Object(z.a)(j);t?a.push(e):a=a.filter((function(t){return t!==e})),h.a.app().firestore().collection("users").doc(h.a.app().auth().currentUser.uid).update({fastTasks:a}).then((function(){return o(a)}))}(e,t.target.checked)}})})]},e)}))]}),Object(O.jsx)("br",{}),Object(O.jsxs)(f.a,{onSubmit:function(e){e.preventDefault(),u.handleSubmit(e)},children:[Object(O.jsxs)(k.a,{children:[Object(O.jsx)(v.a,{children:"Neue Aktivit\xe4t"}),Object(O.jsx)("br",{}),Object(O.jsx)(S.a,{name:"task",placeholder:"Neue Aktivit\xe4t",onChange:u.handleChange,isInvalid:!!u.errors.task,value:u.values.task}),Object(O.jsx)(C.a,{variant:"danger",show:!!u.errors.task,children:u.errors.task})]}),Object(O.jsx)("br",{}),Object(O.jsx)(d.a,{type:"submit",children:"Neue Aktivit\xe4t erstellen"})]})]})};0===h.a.apps.length&&h.a.initializeApp({apiKey:"AIzaSyCvz1ymHe_2OFpKD2F8593e3ITKl7xN0y4",authDomain:"time-tracker-5411c.firebaseapp.com",projectId:"time-tracker-5411c",storageBucket:"time-tracker-5411c.appspot.com",messagingSenderId:"730497288216",appId:"1:730497288216:web:806280737d0aff0163db6d",measurementId:"G-EQ7X4W13CH"});var Z=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){h.a.app().auth().onAuthStateChanged((function(e){return s(e)}))})),Object(O.jsx)(b.a,{children:Object(O.jsxs)(l.a,{fluid:!0,children:[Object(O.jsx)(x,{}),a?Object(O.jsxs)(p.a,{children:[Object(O.jsx)(u.a,{path:"/tasks",component:V}),Object(O.jsx)(u.a,{exact:!0,path:"/",component:q})]}):Object(O.jsxs)(p.a,{children:[Object(O.jsx)(u.a,{path:"/signup",component:M}),Object(O.jsx)(u.a,{exact:!0,path:"/",component:E})]})]})})};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(Z,{})}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.b552dc30.chunk.js.map