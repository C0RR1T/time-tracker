(this["webpackJsonptime-tracker"]=this["webpackJsonptime-tracker"]||[]).push([[0],{272:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),i=a(47),s=a.n(i),r=(a(162),a(18)),l=a(278),o=a(284),j=a(286),d=a(146),u=a(20),h=a(25),b=a(51),O=a(6),x=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(h.e)();return Object(n.useEffect)((function(){u.a.app().auth().onAuthStateChanged(c)}),[]),Object(O.jsxs)(o.a,{expand:"lg",children:[Object(O.jsx)(o.a.Brand,{children:"Time Tracker"}),Object(O.jsx)(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsxs)(o.a.Collapse,{children:[Object(O.jsx)(j.a,{className:"me-auto",children:a?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.a.Link,{children:Object(O.jsx)(b.b,{to:"/",style:{textDecoration:"none"},className:"nav-link",children:"Zeit tracken"})}),Object(O.jsx)(j.a.Link,{children:Object(O.jsx)(b.b,{to:"/tasks",className:"nav-link",children:"Aktivit\xe4ten bearbeiten"})}),Object(O.jsx)(j.a.Link,{children:Object(O.jsx)(b.b,{to:"/stats",className:"nav-link",children:"Statistiken"})})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(j.a.Link,{children:"Login"})})}),Object(O.jsx)(j.a,{children:a&&Object(O.jsx)(j.a.Link,{children:Object(O.jsx)(d.a,{variant:"outline-primary",onClick:function(){return u.a.app().auth().signOut().then((function(){return i&&i.push("/")}))},children:"Ausloggen"})})})]})]})},f=a(82),v=a(33),p=a(152),m=a(285),k=a(279),g=a(153),w=a(155),S=a(154),C=a(280),D=a(157),y=a(71),A=a(40),P=A.a().shape({email:A.c().email("Die E-Mail muss g\xfcltig sein").required("Das E-Mail Feld darf nicht leer sein"),password:A.c()}),E=function(){var e=Object(h.e)(),t=Object(n.useState)({email:"",password:""}),a=Object(r.a)(t,2),c=a[0],i=a[1],s=Object(y.a)({validateOnChange:!1,validateOnBlur:!0,validationSchema:P,initialValues:{email:"",password:""},onSubmit:function(t){var a=t.email,n=t.password;u.a.app().auth().signInWithEmailAndPassword(a,n).then((function(){return e.push("/")})).catch(o)}}),o=function(e){switch(console.log(e.code),e.code){case"auth/invalid-email":i(Object(v.a)(Object(v.a)({},c),{},{email:"Die eingegebene Email ist nicht valid"}));break;case"auth/user-not-found":i(Object(v.a)(Object(v.a)({},c),{},{email:"Dieses Konto existiert nicht"}));break;case"auth/wrong-password":i(Object(v.a)(Object(v.a)({},c),{},{password:"Das eingegebene Passwort ist nicht korrekt"}))}};return Object(O.jsxs)(l.a,{children:[Object(O.jsx)(p.a,{children:"Login"}),Object(O.jsx)("br",{}),Object(O.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),s.handleSubmit()},children:[Object(O.jsx)(k.a,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)(w.a,{children:"E-Mail Adresse"}),Object(O.jsx)(S.a,{type:"email",name:"email",isInvalid:!!s.errors.email||!!c.email,placeholder:"Email Adresse",onChange:s.handleChange}),Object(O.jsx)(C.a,{variant:"danger",show:!!s.errors.email||!!c.email,children:s.errors.email||c.email})]})}),Object(O.jsx)(k.a,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)(w.a,{children:"Passwort"}),Object(O.jsx)(S.a,{type:"password",name:"password",isInvalid:!!s.errors.password||!!c.password,placeholder:"Passwort",onChange:s.handleChange}),Object(O.jsx)(C.a,{variant:"danger",show:!!s.errors.password||!!c.password,children:s.errors.password||c.password})]})}),Object(O.jsx)("br",{}),Object(O.jsx)(d.a,{type:"submit",children:"Einloggen"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)(D.a,{children:["Noch kein Account?"," ",Object(O.jsx)(b.b,{to:"/signup",children:"Hier registrieren"})]})]})]})},I=a(0),T=a.n(I),M=a(3),F=a(156),U=A.a().shape({email:A.c().required("Das Email Feld darf nicht leer sein").email(),password:A.c().required("Das Passwort Feld darf nicht leer sein").min(6,"Das Passwort muss mindestens 6 Zeichen enthalten"),confirmPassword:A.c().oneOf([A.b("password")],"Die Passw\xf6rter stimmen nicht \xfcberein")}),N=function(){var e=Object(h.e)(),t=function(){var t=Object(M.a)(T.a.mark((function t(a){var n,c,i,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.email,c=a.password,t.next=3,u.a.app().auth().createUserWithEmailAndPassword(n,c);case 3:if(i=t.sent,!(s=i.user)){t.next=9;break}return t.next=8,u.a.firestore().collection("users").doc(s.uid).set({activities:[],tasks:[],fastTasks:[]});case 8:u.a.app().auth().signInWithEmailAndPassword(n,c).then((function(){return e.push("")}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=Object(y.a)({initialValues:{password:"",confirmPassword:"",email:""},validateOnBlur:!1,validateOnChange:!0,validationSchema:U,onSubmit:t});return Object(O.jsxs)(l.a,{children:[Object(O.jsx)(p.a,{children:"Konto erstellen"}),Object(O.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),a.handleSubmit(e)},children:[Object(O.jsx)(k.a,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)(w.a,{children:"Email Adresse"}),Object(O.jsx)(S.a,{type:"email",name:"email",placeholder:"Email Adresse",onChange:a.handleChange})]})}),Object(O.jsxs)(k.a,{children:[Object(O.jsx)(F.a,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)(w.a,{children:"Passwort"}),Object(O.jsx)(S.a,{type:"password",name:"password",placeholder:"Passwort",onChange:a.handleChange})]})}),Object(O.jsx)(F.a,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)(w.a,{children:"Passwort best\xe4tigen"}),Object(O.jsx)(S.a,{type:"password",name:"confirmPassword",placeholder:"Passwort best\xe4tigen",onChange:a.handleChange})]})})]}),Object(O.jsx)("br",{}),Object(O.jsx)(d.a,{type:"submit",children:"Konto erstellen"})]})]})},B=a(23),K=a(287),L=a(283),W=a(282),H=function(e){var t=e.onSelect,a=e.onClose,c=e.show,i=e.allowUndefined,s=void 0!==i&&i,l=Object(n.useState)(),o=Object(r.a)(l,2),j=o[0],h=o[1],b=Object(n.useState)(),x=Object(r.a)(b,2),f=x[0],v=x[1];Object(n.useEffect)((function(){return u.a.app().firestore().collection("users").doc(u.a.app().auth().currentUser.uid).onSnapshot((function(e){return h(e.data())}))}),[]);return Object(O.jsxs)(L.a,{show:c,children:[Object(O.jsx)(L.a.Header,{children:Object(O.jsx)(L.a.Title,{children:"Aktivit\xe4t starten"})}),Object(O.jsx)(L.a.Body,{children:Object(O.jsxs)(W.a,{onSelect:function(e){return v(e||void 0)},children:[Object(O.jsx)(W.a.Toggle,{children:"Aktivit\xe4t aussuchen"}),Object(O.jsx)(W.a.Menu,{children:null===j||void 0===j?void 0:j.tasks.map((function(e){return Object(O.jsx)(W.a.Item,{eventKey:e,children:e},e)}))})]})}),Object(O.jsxs)(L.a.Footer,{children:[Object(O.jsx)(d.a,{variant:"danger",onClick:a,children:"Abbrechen"}),Object(O.jsx)(d.a,{variant:"success",onClick:function(){(f||s)&&(t(f),a())},children:"Aktivit\xe4t starten"})]})]})},q=6e4,z=36e5,J=function(e){var t,a,n=null===e||void 0===e||null===(t=e.activities[e.activities.length-1])||void 0===t?void 0:t.pauses[(null===e||void 0===e||null===(a=e.activities[e.activities.length-1])||void 0===a?void 0:a.pauses.length)-1];if(n)return n},V=function(e){return"".concat(Z(Math.floor(e/z)),":").concat(Z(Math.floor(e%z/q)),":").concat(Z(Math.floor(e%q/1e3)))},Z=function(e){return"0".concat(e).slice(-2)},G=function(){var e=Object(n.useState)("00:00:00"),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),s=Object(r.a)(i,2),o=s[0],j=s[1],h=Object(n.useState)(),b=Object(r.a)(h,2),x=b[0],f=b[1],m=Object(n.useState)(!1),g=Object(r.a)(m,2),w=g[0],S=g[1],C=Object(n.useState)(),D=Object(r.a)(C,2),y=D[0],A=D[1];Object(n.useEffect)((function(){u.a.app().firestore().collection("users").doc(u.a.app().auth().currentUser.uid).onSnapshot((function(e){return j(e.data())}))}),[]),Object(n.useEffect)((function(){var e=null===o||void 0===o?void 0:o.activities[(null===o||void 0===o?void 0:o.activities.length)-1];if(e){var t=e.pauses.filter((function(e){return e.finished})).reduce((function(e,t){return e+(t.finished-t.start)}),0),a=J(o);e.finished&&e.start?(c("00:00:00"),clearInterval(y),f(void 0),A(void 0)):(null===a||void 0===a?void 0:a.finished)?(clearInterval(y),A(void 0),f({isPause:!1,name:e.task}),A(setInterval((function(){return c(V(Date.now()-e.start-t))}),1e3))):!(null===a||void 0===a?void 0:a.finished)&&(null===a||void 0===a?void 0:a.start)?(clearInterval(y),c("00:00:00"),f({isPause:!0,name:null===a||void 0===a?void 0:a.task}),A(setInterval((function(){return c(V(Date.now()-a.start))}),1e3))):!e.finished&&e.start&&(clearInterval(y),c("00:00:00"),A(setInterval((function(){return c(V(Date.now()-e.start-t))}),1e3)),f({isPause:!1,name:e.task}))}}),[null===o||void 0===o?void 0:o.activities[(null===o||void 0===o?void 0:o.activities.length)-1]]);var P=function(e){e&&u.a.firestore().collection("users").doc(u.a.auth().currentUser.uid).update({activities:[].concat(Object(B.a)(o.activities),[{start:Date.now(),task:e,pauses:[]}])})},E=function(e){var t=o.activities[o.activities.length-1];u.a.firestore().collection("users").doc(u.a.auth().currentUser.uid).update({activities:[].concat(Object(B.a)(o.activities.length>1?o.activities.slice(-1):[]),[Object(v.a)(Object(v.a)({},t),{},{pauses:[].concat(Object(B.a)(t.pauses),[Object(v.a)({start:Date.now()},e?{task:e}:{})])})])})};return Object(O.jsxs)(l.a,{children:[Object(O.jsx)(H,{allowUndefined:!!x,onSelect:x?E:P,onClose:function(){return S(!1)},show:w}),Object(O.jsx)(p.a,{children:"Zeit tracken"}),Object(O.jsx)(k.a,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(k.a,{children:Object(O.jsx)("h1",{children:a})}),!!x&&Object(O.jsx)(k.a,{children:Object(O.jsxs)("p",{children:["Aktueller Task: ",x.name||"Pause"]})})]})}),Object(O.jsxs)(k.a,{children:[Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{variant:"success",onClick:function(){return S(!0)},disabled:!!x,children:"Starten"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{variant:"secondary",disabled:!x||(null===x||void 0===x?void 0:x.isPause),onClick:function(){return S(!0)},children:"Pause"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{variant:"danger",disabled:!x,onClick:function(){var e=o.activities[o.activities.length-1];x.isPause?u.a.firestore().collection("users").doc(u.a.auth().currentUser.uid).update({activities:[].concat(Object(B.a)(o.activities.length>1?o.activities.slice(-1):[]),[Object(v.a)(Object(v.a)({},e),{},{pauses:[].concat(Object(B.a)(e.pauses.length>1?e.pauses.slice(-1):[]),[Object(v.a)(Object(v.a)({},J(o)),{},{finished:Date.now()})])})])}):u.a.firestore().collection("users").doc(u.a.auth().currentUser.uid).update({activities:[].concat(Object(B.a)(o.activities.length>1?o.activities.slice(-1):[]),[Object(v.a)(Object(v.a)({},e),{},{finished:Date.now()})])})},children:(null===x||void 0===x?void 0:x.isPause)?"Pause beenden":"Beenden"})})]}),Object(O.jsx)("br",{}),Object(O.jsx)("h1",{children:"Schnell-Start"}),Object(O.jsx)(k.a,{children:Object(O.jsx)(K.a,{children:null===o||void 0===o?void 0:o.fastTasks.map((function(e){return Object(O.jsx)(K.a.Item,{disabled:(null===x||void 0===x?void 0:x.name)===e||(null===x||void 0===x?void 0:x.isPause),action:!0,onClick:function(){return x?E(e):P(e)},children:e},e)}))})})]})},Y=a(281),Q=A.a().shape({task:A.c().required("Das Feld ist erforderlich")}),X=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),s=Object(r.a)(i,2),o=s[0],j=s[1],h=Object(y.a)({initialValues:{task:""},onSubmit:function(e){var t=e.task,n=[].concat(Object(B.a)(a),[t]);u.a.app().firestore().collection("users").doc(u.a.auth().currentUser.uid).update({tasks:n}).then((function(){return c(n)}))},validateOnChange:!1,validateOnBlur:!0,validationSchema:Q});return Object(n.useEffect)((function(){u.a.app().firestore().collection("users").doc(u.a.auth().currentUser.uid).onSnapshot((function(e){c(e.get("tasks")||[]),j(e.get("fastTasks")||[])}))}),[]),Object(O.jsxs)(l.a,{children:[Object(O.jsx)(p.a,{children:"Deine Aktivit\xe4ten"}),Object(O.jsxs)(Y.a,{bordered:!0,children:[Object(O.jsxs)("thead",{children:[Object(O.jsx)("th",{children:"Name der Aktivit\xe4t"}),Object(O.jsx)("th",{children:"Als Schnell-Task benutzen"})]}),a.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e}),Object(O.jsx)("td",{className:"d-flex text-align-center align-items-center",children:Object(O.jsx)(m.a.Check,{type:"checkbox",checked:o.includes(e),onChange:function(t){return function(e,t){var a=Object(B.a)(o);t?a.push(e):a=a.filter((function(t){return t!==e})),u.a.app().firestore().collection("users").doc(u.a.app().auth().currentUser.uid).update({fastTasks:a}).then((function(){return j(a)}))}(e,t.target.checked)}})})]},e)}))]}),Object(O.jsx)("br",{}),Object(O.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),h.handleSubmit(e)},children:[Object(O.jsxs)(g.a,{children:[Object(O.jsx)(p.a,{children:"Neue Aktivit\xe4t"}),Object(O.jsx)("br",{}),Object(O.jsx)(S.a,{name:"task",placeholder:"Neue Aktivit\xe4t",onChange:h.handleChange,isInvalid:!!h.errors.task,value:h.values.task}),Object(O.jsx)(C.a,{variant:"danger",show:!!h.errors.task,children:h.errors.task})]}),Object(O.jsx)("br",{}),Object(O.jsx)(d.a,{type:"submit",children:"Neue Aktivit\xe4t erstellen"})]})]})},_=function(e){return{day:(new Date).setHours(0,0,0),month:(new Date).setMonth((new Date).getMonth(),1),year:(new Date).setFullYear((new Date).getFullYear(),1,1),allTime:0,week:R(new Date).getTime()}[e]};function R(e){var t=e.getDay(),a=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(a))}var $={allTime:"Gesamt",year:"Jahr",month:"Monat",week:"Woche",day:"Tag"},ee=function(e){return $[e]},te=6e4,ae=36e5,ne=function(e){return"".concat(Math.floor(e/ae)," Stunden ").concat(Math.floor(e%ae/te)," Minuten ").concat(Math.floor(e%te/1e3)," Sekunden")},ce=function(){var e=Object(n.useState)("allTime"),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),s=Object(r.a)(i,2),o=s[0],j=s[1];return Object(n.useEffect)((function(){u.a.firestore().collection("users").doc(u.a.auth().currentUser.uid).onSnapshot((function(e){var t=e.data();j(t.tasks.map((function(e){var n=t.activities.filter((function(e){return e.start>_(a)&&e.finished})),c=n.filter((function(t){return t.task===e})).reduce((function(e,t){return e+(t.finished-t.start-t.pauses.filter((function(e){return e.finished})).reduce((function(e,t){return e+(t.finished-t.start)}),0))}),0);return c+=n.reduce((function(t,a){return t+a.pauses.filter((function(t){return t.task===e&&t.finished})).reduce((function(e,t){return e+(t.finished-t.start)}),0)}),0),{name:e,time:c}})))}))}),[a]),Object(O.jsxs)(l.a,{children:[Object(O.jsx)("h1",{children:"Statistiken"}),Object(O.jsx)("br",{}),Object(O.jsx)("h4",{children:"Filter"}),Object(O.jsxs)(k.a,{children:[Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{onClick:function(){return c("allTime")},children:"Gesamt"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{onClick:function(){return c("year")},children:"Jahr"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{onClick:function(){return c("month")},children:"Monat"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{onClick:function(){return c("week")},children:"Woche"})}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{onClick:function(){return c("day")},children:"Tag"})})]}),Object(O.jsx)("br",{}),Object(O.jsx)(k.a,{children:Object(O.jsxs)("p",{children:["Aktueller Filter: ",Object(O.jsx)("b",{children:ee(a)})]})}),Object(O.jsx)(k.a,{children:Object(O.jsxs)(Y.a,{children:[Object(O.jsxs)("thead",{children:[Object(O.jsx)("th",{children:"Name der Aktivit\xe4t"}),Object(O.jsx)("th",{children:"Verbrauchte Zeit"})]}),Object(O.jsx)("tbody",{children:o.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.name}),Object(O.jsx)("td",{children:ne(e.time)})]})}))})]})})]})};0===u.a.apps.length&&u.a.initializeApp({apiKey:"AIzaSyCvz1ymHe_2OFpKD2F8593e3ITKl7xN0y4",authDomain:"time-tracker-5411c.firebaseapp.com",projectId:"time-tracker-5411c",storageBucket:"time-tracker-5411c.appspot.com",messagingSenderId:"730497288216",appId:"1:730497288216:web:806280737d0aff0163db6d",measurementId:"G-EQ7X4W13CH"});var ie=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){u.a.app().auth().onAuthStateChanged((function(e){return c(e)}))})),Object(O.jsx)(b.a,{children:Object(O.jsxs)(l.a,{fluid:!0,children:[Object(O.jsx)(x,{}),a?Object(O.jsxs)(f.a,{children:[Object(O.jsx)(h.a,{path:"/tasks",component:X}),Object(O.jsx)(h.a,{path:"/stats",component:ce}),Object(O.jsx)(h.a,{exact:!0,path:"/",component:G})]}):Object(O.jsxs)(f.a,{children:[Object(O.jsx)(h.a,{path:"/signup",component:N}),Object(O.jsx)(h.a,{exact:!0,path:"/",component:E})]})]})})};a(269),a(273);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(ie,{})}),document.getElementById("root"))}},[[272,1,2]]]);
//# sourceMappingURL=main.4a45400c.chunk.js.map